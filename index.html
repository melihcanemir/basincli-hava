<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Hava KaÃ§aÄŸÄ± Maliyet Hesaplama</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    h1, h2, h3, p {
      margin: 0;
    }
    .header {
      text-align: center;
      margin-bottom: 10px;
    }
    .header h1 {
      font-size: 36px;
    }
    .header h2 {
      font-size: 24px;
      margin-top: 5px;
    }
    .header .info {
      text-align: left;
      margin-top: 10px;
      font-size: 16px;
    }
    hr {
      margin: 20px 0;
      border: 1px solid #aaa;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 1000px;
      margin: 20px auto;
      background-color: white;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #ddd;
      text-align: center;
    }
    td:first-child {
      width: 40%;
    }
    input {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
    }
    .buttons {
      text-align: center;
      margin: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
    }

    .aylik {
      background-color: #d0e7ff;
    }

    .yillik {
      background-color: #d0ffd8;
    }

    #printTitle {
      display: none;
      text-align: center;
      font-size: 28px;
      margin-top: 30px;
      margin-bottom: 30px;
    }

    /* Kelebek Mobilya ve tarih sol Ã¼stte yan yana */
    #ustBilgi {
      display: none; /* Normal ekranda gizle */
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 16px;
      color: #555;
      font-weight: normal;
      font-family: Arial, sans-serif;
      z-index: 1000;
      margin-right: 20px;
      white-space: nowrap;
    }

    #printDate {
      display: none;
      font-size: 16px;
      position: fixed;
      top: 10px;
      left: 150px;
      color: #555;
      font-family: Arial, sans-serif;
      z-index: 1000;
      white-space: nowrap;
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      input, .buttons, h2, table:not(#kayitliVeriler), .header {
        display: none !important;
      }
      #kayitliVeriler {
        margin: 0 auto;
        max-width: 100%;
      }
      #printTitle {
        display: block !important;
      }
      #ustBilgi, #printDate {
        display: block !important;
        position: static !important;
        margin: 0 0 10px 10px;
      }
    }

    #kayitliVeriler th:first-child,
    #kayitliVeriler td:first-child {
      width: 50px;
      text-align: center;
    }
  </style>
</head>
<body>

  <!-- Sol Ã¼st kÃ¶ÅŸede Kelebek Mobilya ve tarih yan yana -->
  <div id="ustBilgi">Kelebek Mobilya</div>
  <div id="printDate"></div>

  <!-- BAÅžLIK KISMI -->
  <div class="header">
    <h1>KELEBEK MOBÄ°LYA</h1>
    <h2>BAKIM ONARIM</h2>
    <div class="info">
      <p>Melih Can EMÄ°R - Elektrik & Elektronik MÃ¼hendisi</p>
      <p>Ä°letiÅŸim: melihemir81@gmail.com</p>
    </div>
    <hr />
  </div>

  <!-- YAZDIRMA BAÅžLIÄžI -->
  <h1 id="printTitle">Hava KaÃ§aklarÄ± Maliyet Tablosu</h1>

  <h2 style="text-align:center;">Hava KaÃ§aÄŸÄ± Maliyet Hesaplama</h2>

  <div class="buttons">
    <button onclick="window.print()">ðŸ–¨ YazdÄ±r / PDF'e Aktar</button>
    <button onclick="veriyiKaydet()">âž• Veriyi Kaydet</button>
  </div>

  <!-- GiriÅŸ AlanlarÄ± -->
  <table>
    <tr>
      <td>Hava KaÃ§aÄŸÄ± (Litre/dk):</td>
      <td><input type="text" id="litre" oninput="syncFromLitre()" /></td>
    </tr>
    <tr>
      <td>Hava KaÃ§aÄŸÄ± (mÂ³/dk):</td>
      <td><input type="text" id="metrekup" oninput="syncFromMetrekup()" /></td>
    </tr>
    <tr>
      <td>Elektrik birim fiyatÄ± (â‚º / kWh):</td>
      <td><input type="text" id="birimFiyat" /></td>
    </tr>
    <tr>
      <td>1 Euro kuru:</td>
      <td><input type="text" id="euroKuru" /></td>
    </tr>
  </table>

  <!-- Hesaplama Tablosu -->
  <table>
    <tr><th colspan="2">Hesaplanan SonuÃ§lar</th></tr>
    <tr class="aylik"><td>AylÄ±k KayÄ±p (30 gÃ¼n)</td><td id="aylikKayÄ±p"></td></tr>
    <tr class="aylik"><td>Elektrik TÃ¼ketimi (kWh)</td><td id="aylikTuketim"></td></tr>
    <tr class="aylik"><td>Elektrik Maliyeti (â‚º)</td><td id="aylikMaliyet"></td></tr>
    <tr class="aylik"><td>Elektrik Maliyeti (â‚¬)</td><td id="aylikEuro"></td></tr>

    <tr class="yillik"><td>YÄ±llÄ±k KayÄ±p (365 gÃ¼n)</td><td id="yillikKayÄ±p"></td></tr>
    <tr class="yillik"><td>Elektrik TÃ¼ketimi (kWh)</td><td id="yillikTuketim"></td></tr>
    <tr class="yillik"><td>Elektrik Maliyeti (â‚º)</td><td id="yillikMaliyet"></td></tr>
    <tr class="yillik"><td>Elektrik Maliyeti (â‚¬)</td><td id="yillikEuro"></td></tr>
  </table>

  <!-- KayÄ±tlÄ± Veriler Tablosu -->
  <table id="kayitliVeriler">
    <thead>
      <tr>
        <th>No</th>
        <th>Litre/dk</th>
        <th>mÂ³/dk</th>
        <th>AylÄ±k Maliyet (â‚º)</th>
        <th>AylÄ±k Maliyet (â‚¬)</th>
        <th>YÄ±llÄ±k Maliyet (â‚º)</th>
        <th>YÄ±llÄ±k Maliyet (â‚¬)</th>
      </tr>
    </thead>
    <tbody>
      <!-- Veri kayÄ±tlarÄ± burada oluÅŸacak -->
    </tbody>
  </table>

  <script>
    let veriIndex = 1;

    // VirgÃ¼lÃ¼ noktaya Ã§evirir ve sayÄ± yapar
    function parseToFloatTR(value) {
      if (!value) return 0;
      return parseFloat(value.replace(',', '.')) || 0;
    }

    // NoktayÄ± virgÃ¼le Ã§evirir, ondalÄ±k basamaÄŸÄ± ayarlar
    function formatToTR(value, decimals=2) {
      return value.toFixed(decimals).replace('.', ',');
    }

    function syncFromLitre() {
      const litreStr = document.getElementById("litre").value;
      const litre = parseToFloatTR(litreStr);
      document.getElementById("metrekup").value = formatToTR(litre / 1000, 3);
      hesapla();
    }

    function syncFromMetrekup() {
      const m3Str = document.getElementById("metrekup").value;
      const m3 = parseToFloatTR(m3Str);
      document.getElementById("litre").value = formatToTR(m3 * 1000, 2);
      hesapla();
    }

    function hesapla() {
      const litre = parseToFloatTR(document.getElementById("litre").value);
      const birimFiyat = parseToFloatTR(document.getElementById("birimFiyat").value);
      const euroKuru = parseToFloatTR(document.getElementById("euroKuru").value) || 1;

      const aylikKayÄ±p = litre * 60 * 24 * 30;
      const yillikKayÄ±p = litre * 60 * 24 * 365;

      const aylikTuketim = aylikKayÄ±p * 0.12 * 0.0001;
      const yillikTuketim = yillikKayÄ±p * 0.12 * 0.0001;

      const aylikMaliyet = aylikTuketim * birimFiyat;
      const yillikMaliyet = yillikTuketim * birimFiyat;

      document.getElementById("aylikKayÄ±p").innerText = `${formatToTR(aylikKayÄ±p / 1000, 2)} mÂ³ (${formatToTR(aylikKayÄ±p, 2)} L)`;
      document.getElementById("aylikTuketim").innerText = formatToTR(aylikTuketim, 2);
      document.getElementById("aylikMaliyet").innerText = formatToTR(aylikMaliyet, 2);
      document.getElementById("aylikEuro").innerText = formatToTR(aylikMaliyet / euroKuru, 2);

      document.getElementById("yillikKayÄ±p").innerText = `${formatToTR(yillikKayÄ±p / 1000, 2)} mÂ³ (${formatToTR(yillikKayÄ±p, 2)} L)`;
      document.getElementById("yillikTuketim").innerText = formatToTR(yillikTuketim, 2);
      document.getElementById("yillikMaliyet").innerText = formatToTR(yillikMaliyet, 2);
      document.getElementById("yillikEuro").innerText = formatToTR(yillikMaliyet / euroKuru, 2);
    }

    function veriyiKaydet() {
      const litre = parseToFloatTR(document.getElementById("litre").value);
      const metrekup = litre / 1000;
      const euroKuru = parseToFloatTR(document.getElementById("euroKuru").value) || 1;
      const birimFiyat = parseToFloatTR(document.getElementById("birimFiyat").value);

      const aylikKayÄ±p = litre * 60 * 24 * 30;
      const yillikKayÄ±p = litre * 60 * 24 * 365;

      const aylikTuketim = aylikKayÄ±p * 0.12 * 0.001;
      const yillikTuketim = yillikKayÄ±p * 0.12 * 0.001;

      const aylikMaliyet = aylikTuketim * birimFiyat;
      const yillikMaliyet = yillikTuketim * birimFiyat;

      const aylikEuro = aylikMaliyet / euroKuru;
      const yillikEuro = yillikMaliyet / euroKuru;

      const tbody = document.querySelector("#kayitliVeriler tbody");
      const row = document.createElement("tr");

      row.innerHTML = `
        <td>${veriIndex++}</td>
        <td>${formatToTR(litre, 2)}</td>
        <td>${formatToTR(metrekup, 3)}</td>
        <td>${formatToTR(aylikMaliyet, 2)}</td>
        <td>${formatToTR(aylikEuro, 2)}</td>
        <td>${formatToTR(yillikMaliyet, 2)}</td>
        <td>${formatToTR(yillikEuro, 2)}</td>
      `;

      tbody.appendChild(row);
    }

    function tarihYaz() {
      const now = new Date();
      const gun = now.getDate().toString().padStart(2, '0');
      const ay = (now.getMonth() + 1).toString().padStart(2, '0');
      const yil = now.getFullYear();
      document.getElementById("printDate").textContent = `${gun}.${ay}.${yil}`;
    }

    // OndalÄ±k ayraÃ§ olarak virgÃ¼l kullanÄ±mÄ±na izin ve dÃ¶nÃ¼ÅŸtÃ¼rme
    document.querySelectorAll("input").forEach(el => {
      el.addEventListener("input", () => {
        // EÄŸer sayÄ± girdiyse hesapla
        hesapla();
      });
      el.addEventListener("keypress", e => {
        // Sadece rakam, virgÃ¼l, backspace, ok tuÅŸlarÄ± kabul et
        const allowed = ['0','1','2','3','4','5','6','7','8','9',','];
        if (!allowed.includes(e.key) && !['Backspace', 'ArrowLeft', 'ArrowRight', 'Delete', 'Tab'].includes(e.key)) {
          e.preventDefault();
        }
      });
    });

    // BaÅŸlangÄ±Ã§ deÄŸerleri iÃ§in hesaplama ve tarih yazma
    hesapla();
    tarihYaz();
  </script>

</body>
</html>
