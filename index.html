<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Hava KaÃ§aÄŸÄ± Maliyet Hesaplama</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    h1, h2, h3, p {
      margin: 0;
    }
    .header {
      text-align: center;
      margin-bottom: 10px;
    }
    .header h1 {
      font-size: 36px;
    }
    .header h2 {
      font-size: 24px;
      margin-top: 5px;
    }
    .header .info {
      text-align: left;
      margin-top: 10px;
      font-size: 16px;
    }
    hr {
      margin: 20px 0;
      border: 1px solid #aaa;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 1000px;
      margin: 20px auto;
      background-color: white;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #ddd;
      text-align: center;
    }
    td:first-child {
      width: 40%;
    }
    input {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
    }
    .buttons {
      text-align: center;
      margin: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin: 5px;
      cursor: pointer;
    }

    .aylik {
      background-color: #d0e7ff;
    }

    .yillik {
      background-color: #d0ffd8;
    }

    #printTitle {
      display: none;
      text-align: center;
      font-size: 28px;
      margin-top: 30px;
      margin-bottom: 30px;
    }

    /* Kelebek Mobilya ve tarih sol Ã¼stte yan yana */
    #ustBilgi {
      display: none; /* Normal ekranda gizle */
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 16px;
      color: #555;
      font-weight: normal;
      font-family: Arial, sans-serif;
      z-index: 1000;
      margin-right: 20px;
      white-space: nowrap;
    }

    #printDate {
      display: none;
      font-size: 16px;
      position: fixed;
      top: 10px;
      left: 150px;
      color: #555;
      font-family: Arial, sans-serif;
      z-index: 1000;
      white-space: nowrap;
    }

#isimGoster {
  display: none;
}
    @media print {

      body {
        background: white;
        padding: 0;
      }
      input, .buttons, h2, table:not(#kayitliVeriler), .header {
        display: none !important;
      }
      #kayitliVeriler {
        margin: 0 auto;
        max-width: 100%;
      }
      #printTitle {
        display: block !important;
      }
      #ustBilgi, #printDate {
        display: block !important;
        position: static !important;
        margin: 0 0 10px 10px;
      }
 #isimGoster.sadeceYazdirma {
    display: block !important;
    text-align: right;
    font-size: 16px;
    margin-right: 20px;
    font-style: italic;
  }
    }

    #kayitliVeriler th:first-child,
    #kayitliVeriler td:first-child {
      width: 50px;
      text-align: center;
    }
  </style>
</head>
<body>

  <!-- Sol Ã¼st kÃ¶ÅŸede Kelebek Mobilya ve tarih yan yana -->
  <div id="ustBilgi">Kelebek Mobilya</div>
  <div id="printDate"></div>

  <!-- BAÅžLIK KISMI -->
  <div class="header">
    <h1>KELEBEK MOBÄ°LYA</h1>
    <h2>BAKIM ONARIM</h2>
    <div class="info">
      <p style="font-size: 14px;">Melih Can EMÄ°R - Elektrik & Elektronik MÃ¼hendisi</p>
      <p style="font-size: 14px;">Ä°letiÅŸim: melihemir81@gmail.com</p>

    </div>
    <hr />
  </div>


  <!-- YAZDIRMA BAÅžLIÄžI -->
  <h1 id="printTitle">Hava KaÃ§aklarÄ± Maliyet Tablosu</h1>

  <h2 style="text-align:center;">Hava KaÃ§aÄŸÄ± Maliyet Hesaplama</h2>

  <div class="buttons">
    <button onclick="window.print()">ðŸ–¨ YazdÄ±r / PDF'e Aktar</button>
    <button onclick="veriyiKaydet()">âž• Veriyi Kaydet</button>
  </div>

  <!-- GiriÅŸ AlanlarÄ± -->
  <table>

    <tr>
      <td>BÃ¶lÃ¼m:</td>
      <td><input type="text" id="bolum" /></td>
    </tr>
    <tr>
      <td>Hava KaÃ§aÄŸÄ± (Litre/dk):</td>
      <td><input type="text" id="litre" oninput="syncFromLitre()" /></td>
    </tr>
    <tr>
      <td>Hava KaÃ§aÄŸÄ± (mÂ³/dk):</td>
      <td><input type="text" id="metrekup" oninput="syncFromMetrekup()" /></td>
    </tr>
    <tr>
      <td>Elektrik birim fiyatÄ± (â‚º / kWh):</td>
      <td><input type="text" id="birimFiyat" /></td>
    </tr>
    <tr>
      <td>1 Euro kuru:</td>
      <td><input type="text" id="euroKuru" /></td>
    </tr>
  <tr>
      <td>Ad Soyad (zorunlu deÄŸil):</td>
      <td><input type="text" id="isim" /></td>
    </tr>
  </table>
  


  <!-- Hesaplama Tablosu -->
  <table>
    <tr><th colspan="2">Hesaplanan SonuÃ§lar</th></tr>
    <tr class="aylik"><td>AylÄ±k KayÄ±p (30 gÃ¼n)</td><td id="aylikKayÄ±p"></td></tr>
    <tr class="aylik"><td>Elektrik TÃ¼ketimi (kWh)</td><td id="aylikTuketim"></td></tr>
    <tr class="aylik"><td>Elektrik Maliyeti (â‚º)</td><td id="aylikMaliyet"></td></tr>
    <tr class="aylik"><td>Elektrik Maliyeti (â‚¬)</td><td id="aylikEuro"></td></tr>

    <tr class="yillik"><td>YÄ±llÄ±k KayÄ±p (365 gÃ¼n)</td><td id="yillikKayÄ±p"></td></tr>
    <tr class="yillik"><td>Elektrik TÃ¼ketimi (kWh)</td><td id="yillikTuketim"></td></tr>
    <tr class="yillik"><td>Elektrik Maliyeti (â‚º)</td><td id="yillikMaliyet"></td></tr>
    <tr class="yillik"><td>Elektrik Maliyeti (â‚¬)</td><td id="yillikEuro"></td></tr>
  </table>

    <p id="isimGoster" class="sadeceYazdirma"></p>
      <p id="isimGoster" style="text-align:right; font-size:5px; margin-right:20px; margin-top:8px; font-style:italic;"></p>


  <!-- KayÄ±tlÄ± Veriler Tablosu -->
  <table id="kayitliVeriler">
    <thead>
      <tr>
        <th>No</th>
        <th>BÃ¶lÃ¼m</th>
        <th>Litre/dk</th>
        <th>mÂ³/dk</th>
        <th>AylÄ±k Maliyet (â‚º)</th>
        <th>AylÄ±k Maliyet (â‚¬)</th>
        <th>YÄ±llÄ±k Maliyet (â‚º)</th>
        <th>YÄ±llÄ±k Maliyet (â‚¬)</th>
      </tr>
    </thead>
    <tbody>


      <!-- Veri kayÄ±tlarÄ± burada oluÅŸacak -->
    </tbody>
<tfoot>
    <tr style="font-weight:bold; background:#eee;">
      <td>Toplam</td>
      <td>-</td> 
      <td id="toplamLitre">0,000</td>
      <td id="toplamMetrekup">0,000</td>
      <td id="toplamAylikTL">0,000</td>
      <td id="toplamAylikEuro">0,000</td>
      <td id="toplamYillikTL">0,000</td>
      <td id="toplamYillikEuro">0,000</td>
    </tr>
  </tfoot>
  </table>

  


  <script>
    let veriIndex = 1;

    // VirgÃ¼lÃ¼ noktaya Ã§evirir ve sayÄ± yapar
    function parseToFloatTR(value) {
      if (!value) return 0;
      return parseFloat(value.replace(',', '.')) || 0;
    }

    // NoktayÄ± virgÃ¼le Ã§evirir, ondalÄ±k basamaÄŸÄ± ayarlar
    function formatToTR(value, decimals=2) {
      return value.toFixed(decimals).replace('.', ',');
    }

    function syncFromLitre() {
      const litreStr = document.getElementById("litre").value;
      const litre = parseToFloatTR(litreStr);
      document.getElementById("metrekup").value = formatToTR(litre / 1000, 3);
      hesapla();
    }

    function syncFromMetrekup() {
      const m3Str = document.getElementById("metrekup").value;
      const m3 = parseToFloatTR(m3Str);
      document.getElementById("litre").value = formatToTR(m3 * 1000, 2);
      hesapla();
    }

    function hesapla() {
      const litre = parseToFloatTR(document.getElementById("litre").value);
      const birimFiyat = parseToFloatTR(document.getElementById("birimFiyat").value);
      const euroKuru = parseToFloatTR(document.getElementById("euroKuru").value) || 1;

      const aylikKayÄ±p = litre * 60 * 24 * 30;
      const yillikKayÄ±p = litre * 60 * 24 * 365;

      const aylikTuketim = aylikKayÄ±p * 0.12 * 0.001;
      const yillikTuketim = yillikKayÄ±p * 0.12 * 0.001;

      const aylikMaliyet = aylikTuketim * birimFiyat;
      const yillikMaliyet = yillikTuketim * birimFiyat;

      document.getElementById("aylikKayÄ±p").innerText = `${formatToTR(aylikKayÄ±p / 1000, 2)} mÂ³ (${formatToTR(aylikKayÄ±p, 2)} L)`;
      document.getElementById("aylikTuketim").innerText = formatToTR(aylikTuketim, 2);
      document.getElementById("aylikMaliyet").innerText = formatToTR(aylikMaliyet, 2);
      document.getElementById("aylikEuro").innerText = formatToTR(aylikMaliyet / euroKuru, 2);

      document.getElementById("yillikKayÄ±p").innerText = `${formatToTR(yillikKayÄ±p / 1000, 2)} mÂ³ (${formatToTR(yillikKayÄ±p, 2)} L)`;
      document.getElementById("yillikTuketim").innerText = formatToTR(yillikTuketim, 2);
      document.getElementById("yillikMaliyet").innerText = formatToTR(yillikMaliyet, 2);
      document.getElementById("yillikEuro").innerText = formatToTR(yillikMaliyet / euroKuru, 2);
    }

    function veriyiKaydet() {
      const litre = parseToFloatTR(document.getElementById("litre").value);
      const bolum = document.getElementById("bolum").value || "-";

      const metrekup = litre / 1000;
      const euroKuru = parseToFloatTR(document.getElementById("euroKuru").value) || 1;
      const birimFiyat = parseToFloatTR(document.getElementById("birimFiyat").value);

      const aylikKayÄ±p = litre * 60 * 24 * 30;
      const yillikKayÄ±p = litre * 60 * 24 * 365;

      const aylikTuketim = aylikKayÄ±p * 0.12 * 0.001;
      const yillikTuketim = yillikKayÄ±p * 0.12 * 0.001;

      const aylikMaliyet = aylikTuketim * birimFiyat;
      const yillikMaliyet = yillikTuketim * birimFiyat;

      const aylikEuro = aylikMaliyet / euroKuru;
      const yillikEuro = yillikMaliyet / euroKuru;

      const tbody = document.querySelector("#kayitliVeriler tbody");
      const row = document.createElement("tr");


   
const isim = document.getElementById("isim").value.trim();
if (isim) {
  document.getElementById("isimGoster").innerText = `Raporlayan: ${isim}`;
} else {
  document.getElementById("isimGoster").innerText = "";
}



      row.innerHTML = `
        <td>${veriIndex++}</td>
        <td>${bolum}</td>
        <td>${formatToTR(litre, 2)}</td>
        <td>${formatToTR(metrekup, 3)}</td>
        <td>${formatToTR(aylikMaliyet, 2)}</td>
        <td>${formatToTR(aylikEuro, 2)}</td>
        <td>${formatToTR(yillikMaliyet, 2)}</td>
        <td>${formatToTR(yillikEuro, 2)}</td>
      `;

      tbody.appendChild(row);
         
      toplamlariGuncelle();

    }
function toplamlariGuncelle() {
  const rows = document.querySelectorAll("#kayitliVeriler tbody tr");
 
  let toplamLitre = 0;
  let toplamMetrekup = 0;
  let toplamAylikTL = 0;
  let toplamAylikEuro = 0;
  let toplamYillikTL = 0;
  let toplamYillikEuro = 0;

  rows.forEach(row => {
    const tds = row.querySelectorAll("td");

    toplamLitre += parseToFloatTR(tds[2].innerText);
    toplamMetrekup += parseToFloatTR(tds[3].innerText);
    toplamAylikTL += parseToFloatTR(tds[4].innerText);
    toplamAylikEuro += parseToFloatTR(tds[5].innerText);
    toplamYillikTL += parseToFloatTR(tds[6].innerText);
    toplamYillikEuro += parseToFloatTR(tds[7].innerText);
  });

  document.getElementById("toplamLitre").innerText = formatToTR(toplamLitre, 2);
  document.getElementById("toplamMetrekup").innerText = formatToTR(toplamMetrekup, 3);
  document.getElementById("toplamAylikTL").innerText = formatToTR(toplamAylikTL, 2);
  document.getElementById("toplamAylikEuro").innerText = formatToTR(toplamAylikEuro, 2);
  document.getElementById("toplamYillikTL").innerText = formatToTR(toplamYillikTL, 2);
  document.getElementById("toplamYillikEuro").innerText = formatToTR(toplamYillikEuro, 2);
}

    function tarihYaz() {
      const now = new Date();
      const gun = now.getDate().toString().padStart(2, '0');
      const ay = (now.getMonth() + 1).toString().padStart(2, '0');
      const yil = now.getFullYear();
      document.getElementById("printDate").textContent = `${gun}.${ay}.${yil}`;
    }

  // Sadece sayÄ±sal alanlar iÃ§in geÃ§erli olacak kÄ±sÄ±tlama
const sayisalInputlar = ['litre', 'metrekup', 'birimFiyat', 'euroKuru'];

sayisalInputlar.forEach(id => {
  const el = document.getElementById(id);

  el.addEventListener("input", () => {
    hesapla();
  });

  el.addEventListener("keypress", e => {
    const allowed = ['0','1','2','3','4','5','6','7','8','9',','];
    if (!allowed.includes(e.key) && !['Backspace', 'ArrowLeft', 'ArrowRight', 'Delete', 'Tab'].includes(e.key)) {
      e.preventDefault();
    }
  });
});

    // BaÅŸlangÄ±Ã§ deÄŸerleri iÃ§in hesaplama ve tarih yazma
    hesapla();
    tarihYaz();
  </script>

</body>
</html>
